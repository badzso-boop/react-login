<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <title>Belépés</title>
</head>
<body class="p-1 w-100 bg-dark h-100">
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root" class="container-fluid row p-1 m-0">
    <h1 class="text-center col-lg-12 text-white mb-5">Üdvözöllek az oldalon!</h1>
    <div class="col-lg-6">
        <h1 class="text-center py-3 text-info ">Belépés</h1>
        <div class="list-group w-75 mx-auto" id="list">
            <input class="list-group-item hater border-light border-bottom-0 border-top-0 text-dark" type = "email" id = "logemail" placeholder = "Email" required>
            <input class="list-group-item hater border-light border-top-0 text-dark" type = "password" id = "logpassword" placeholder = "Jelszó" required>
            <button class="list-group-item w-100 btn btn-info text-dark my-3 hater border border-dark" type = "submit" onclick="login();">Belépés</button>
        </div>
    </div>
    <div class="col-lg-6">
        <h1 class="text-center py-3 text-info">Regisztráció</h1>
        <div class="list-group w-75 mx-auto" id="list">
            <input class="list-group-item hater border-light border-bottom-0 text-dark" type = "name" id = "signev" placeholder = "Név" required>
            <input class="list-group-item hater border-light border-bottom-0 border-top-0 text-dark" type = "email" id = "sigemail" placeholder = "Email" required>
            <input class="list-group-item hater border-light border-bottom-0 border-top-0 text-dark" type = "password" id = "sigpassword" placeholder = "Jelszó" required>
            <input class="list-group-item hater border-light border-top-0 text-dark" type = "password" id = "sigpassword2" placeholder = "Jelszó újra" required>
            <button class="list-group-item w-100 btn btn-info text-dark my-3 hater border border-dark" type = "submit" onclick="signup()">Regisztrálj!</button>
        </div>
    </div>
</div>
</body>
<script>
    function login() {
        const email = document.getElementById('logemail').value;
        const password = document.getElementById('logpassword').value;

        const loginData = {
            email: email,
            password: password
        }

        const span = document.createElement('span');

        fetch('http://localhost:3030/login', {method: 'POST', body: JSON.stringify(loginData, null, 2), headers: {'Content-type':'application/json'}}).then(res => {
            if (res.redirected) {
                window.location.href = res.url;
            }
            return res.json();
        }).then(data => {
            console.log(data);

            if(data.siker === 0)
            {
                span.innerText = "Sikertelen belépés!";
                document.body.appendChild(span);
            }
        });
    }

    function signup() {
        const nev = document.getElementById('signev').value;
        const email = document.getElementById('sigemail').value;
        const password = document.getElementById('sigpassword').value;
        const password2 = document.getElementById('sigpassword2').value;

        const span = document.createElement('span');

        const signupData = {
            nev: nev,
            email: email,
            password: password,
            password2: password2
        }
        
        fetch('http://localhost:3030/signup', {method: 'POST', body: JSON.stringify(signupData, null, 2), headers: {'Content-type':'application/json'}}).then(res => {
            if (res.redirected) {
                window.location.href = res.url;
            }
            return res.json();
        }).then(data => {
            console.log(data);

            if(data.siker === 0)
            {
                span.innerText = "Sikertelen regisztráció!";
                document.body.appendChild(span);
            }
        });
    }
</script>
</html>